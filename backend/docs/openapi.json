{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":""}},"tags":["App"]}},"/articles":{"post":{"operationId":"ArticlesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestCreateArticleDto"}}}},"responses":{"201":{"description":"作成成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseArticleAllDto"}}}}},"summary":"記事を作成","tags":["Articles"]},"get":{"operationId":"ArticlesController_findAll","parameters":[{"name":"publishStatus","required":false,"in":"query","description":"公開状態で絞り込み（all: すべて、draft: 下書きのみ、published: 公開済み）","schema":{"enum":["all","draft","published"],"type":"string"}},{"name":"search","required":false,"in":"query","description":"検索キーワード（title, content を検索）","schema":{}},{"name":"sortBy","required":false,"in":"query","description":"ソート順","schema":{"enum":["contentDraft.title:ASC","contentDraft.title:DESC","updatedAt:ASC","updatedAt:DESC"],"type":"string"}},{"name":"limit","required":false,"in":"query","description":"取得件数（デフォルト: 20、最大: 100）","schema":{"example":20,"type":"number"}},{"name":"page","required":false,"in":"query","description":"ページ番号（デフォルト: 1）","schema":{"example":1,"type":"number"}},{"name":"filter.user.id","required":false,"in":"query","description":"ユーザーIDで絞り込み","schema":{"example":1,"type":"number"}},{"name":"filter.user.organization.id","required":true,"in":"query","description":"組織ID（必須）","schema":{"example":1,"type":"number"}}],"responses":{"200":{"description":"成功（publishStatusに応じてレスポンス構造が変化）","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ResponsePaginatedArticleAllDto"},{"$ref":"#/components/schemas/ResponsePaginatedArticleDraftDto"},{"$ref":"#/components/schemas/ResponsePaginatedArticlePublishedDto"}]}}}},"400":{"description":"filter.user.organization.id is required"}},"summary":"記事一覧を取得","tags":["Articles"]}},"/articles/{id}":{"get":{"operationId":"ArticlesController_findOne","parameters":[{"name":"id","required":true,"in":"path","description":"記事ID","schema":{"example":1,"type":"number"}}],"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseArticleAllDto"}}}},"404":{"description":"記事が見つからない"}},"summary":"記事を取得","tags":["Articles"]},"delete":{"operationId":"ArticlesController_remove","parameters":[{"name":"id","required":true,"in":"path","description":"記事ID","schema":{"example":1,"type":"number"}}],"responses":{"200":{"description":"削除成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseDeleteResultDto"}}}}},"summary":"記事を削除","tags":["Articles"]}},"/articles/{id}/draft":{"get":{"operationId":"ArticlesController_getDraft","parameters":[{"name":"id","required":true,"in":"path","description":"記事ID","schema":{"example":1,"type":"number"}}],"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseArticleContentDraftDto"}}}},"404":{"description":"記事が見つからない"}},"summary":"記事の下書きを取得","tags":["Articles"]},"patch":{"operationId":"ArticlesController_updateDraft","parameters":[{"name":"id","required":true,"in":"path","description":"記事ID","schema":{"example":1,"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestUpdateArticleDraftDto"}}}},"responses":{"200":{"description":"更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseArticleContentDraftDto"}}}},"404":{"description":"記事が見つからない"}},"summary":"記事の下書きを更新","tags":["Articles"]}},"/articles/{id}/publish":{"post":{"operationId":"ArticlesController_publish","parameters":[{"name":"id","required":true,"in":"path","description":"記事ID","schema":{"example":1,"type":"number"}}],"responses":{"201":{"description":"公開成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseArticleContentPublishedDto"}}}},"404":{"description":"記事が見つからない"}},"summary":"記事を公開（下書きの内容を公開版として保存）","tags":["Articles"]}},"/articles/{id}/published":{"get":{"operationId":"ArticlesController_getPublishedVersions","parameters":[{"name":"id","required":true,"in":"path","description":"記事ID","schema":{"example":1,"type":"number"}}],"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ResponseArticleContentPublishedDto"}}}}},"404":{"description":"記事が見つからない"}},"summary":"記事の公開履歴を取得","tags":["Articles"]}},"/articles/{id}/published/latest":{"get":{"operationId":"ArticlesController_getLatestPublished","parameters":[{"name":"id","required":true,"in":"path","description":"記事ID","schema":{"example":1,"type":"number"}}],"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseArticleContentPublishedDto"}}}},"404":{"description":"公開版が見つからない"}},"summary":"記事の最新公開版を取得","tags":["Articles"]}},"/users":{"post":{"operationId":"UsersController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestCreateUserDto"}}}},"responses":{"201":{"description":"作成成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUserDto"}}}}},"summary":"ユーザーを作成","tags":["Users"]},"get":{"operationId":"UsersController_findAll","parameters":[{"name":"search","required":false,"in":"query","description":"検索キーワード（name を検索）","schema":{}},{"name":"sortBy","required":false,"in":"query","description":"ソート順","schema":{"enum":["name:ASC","name:DESC","updatedAt:ASC","updatedAt:DESC"],"type":"string"}},{"name":"limit","required":false,"in":"query","description":"取得件数（デフォルト: 20、最大: 100）","schema":{"example":20,"type":"number"}},{"name":"page","required":false,"in":"query","description":"ページ番号（デフォルト: 1）","schema":{"example":1,"type":"number"}},{"name":"filter.organization.id","required":true,"in":"query","description":"組織ID（必須）","schema":{"example":1,"type":"number"}}],"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponsePaginatedUserDto"}}}},"400":{"description":"filter.organization.id is required"}},"summary":"ユーザー一覧を取得","tags":["Users"]}},"/users/{id}":{"get":{"operationId":"UsersController_findOne","parameters":[{"name":"id","required":true,"in":"path","description":"ユーザーID","schema":{"example":1,"type":"number"}}],"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUserDto"}}}},"404":{"description":"ユーザーが見つからない"}},"summary":"ユーザーを取得","tags":["Users"]},"patch":{"operationId":"UsersController_update","parameters":[{"name":"id","required":true,"in":"path","description":"ユーザーID","schema":{"example":1,"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestUpdateUserDto"}}}},"responses":{"200":{"description":"更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUpdateResultDto"}}}},"404":{"description":"ユーザーが見つからない"}},"summary":"ユーザーを更新","tags":["Users"]},"delete":{"operationId":"UsersController_remove","parameters":[{"name":"id","required":true,"in":"path","description":"ユーザーID","schema":{"example":1,"type":"number"}}],"responses":{"200":{"description":"削除成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseDeleteResultDto"}}}},"404":{"description":"ユーザーが見つからない"}},"summary":"ユーザーを削除","tags":["Users"]}}},"info":{"title":"Articles API","description":"記事管理API","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"schemas":{"RequestCreateArticleDto":{"type":"object","properties":{"title":{"type":"string","description":"タイトル","example":"はじめての投稿"},"content":{"type":"string","description":"本文","example":"これは記事の内容です。"},"userId":{"type":"number","description":"投稿者のユーザーID","example":1}},"required":["title","userId"]},"ResponseOrganizationDto":{"type":"object","properties":{"id":{"type":"number","description":"組織ID","example":1},"name":{"type":"string","description":"組織名","example":"テスト株式会社"},"slug":{"type":"string","description":"スラッグ（URL用）","example":"test-company"},"description":{"type":"object","description":"説明","example":"テスト用の組織です","nullable":true},"createdAt":{"format":"date-time","type":"string","description":"作成日時","example":"2025-01-01T00:00:00.000Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新日時","example":"2025-01-01T00:00:00.000Z"}},"required":["id","name","slug","description","createdAt","updatedAt"]},"ResponseUserDto":{"type":"object","properties":{"id":{"type":"number","description":"ユーザーID","example":1},"name":{"type":"string","description":"ユーザー名","example":"テストユーザー"},"thumbnailImage":{"type":"object","description":"サムネイル画像URL","example":"https://example.com/user.png","nullable":true},"createdAt":{"format":"date-time","type":"string","description":"作成日時","example":"2025-01-01T00:00:00.000Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新日時","example":"2025-01-01T00:00:00.000Z"},"organization":{"description":"所属組織","allOf":[{"$ref":"#/components/schemas/ResponseOrganizationDto"}]}},"required":["id","name","thumbnailImage","createdAt","updatedAt","organization"]},"ResponseArticleContentDraftDto":{"type":"object","properties":{"id":{"type":"number","description":"下書きID","example":1},"title":{"type":"string","description":"タイトル","example":"はじめての投稿"},"content":{"type":"string","description":"本文","example":"これは記事の内容です。"},"createdAt":{"format":"date-time","type":"string","description":"作成日時","example":"2025-01-01T00:00:00.000Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新日時","example":"2025-01-01T00:00:00.000Z"}},"required":["id","title","content","createdAt","updatedAt"]},"ResponseArticleContentPublishedDto":{"type":"object","properties":{"id":{"type":"number","description":"公開版ID","example":1},"title":{"type":"string","description":"タイトル","example":"はじめての投稿"},"content":{"type":"string","description":"本文","example":"これは記事の内容です。"},"publishedAt":{"format":"date-time","type":"string","description":"公開日時","example":"2025-01-01T00:00:00.000Z"}},"required":["id","title","content","publishedAt"]},"ResponseArticleAllDto":{"type":"object","properties":{"id":{"type":"number","description":"記事ID","example":1},"createdAt":{"format":"date-time","type":"string","description":"作成日時","example":"2025-01-01T00:00:00.000Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新日時","example":"2025-01-01T00:00:00.000Z"},"user":{"description":"投稿者","allOf":[{"$ref":"#/components/schemas/ResponseUserDto"}]},"contentDraft":{"description":"下書き","allOf":[{"$ref":"#/components/schemas/ResponseArticleContentDraftDto"}]},"contentPublishedVersions":{"description":"公開履歴","type":"array","items":{"$ref":"#/components/schemas/ResponseArticleContentPublishedDto"}}},"required":["id","createdAt","updatedAt","user","contentDraft","contentPublishedVersions"]},"ResponsePaginatedMetaDto":{"type":"object","properties":{"itemsPerPage":{"type":"number","description":"1ページあたりの件数","example":20},"totalItems":{"type":"number","description":"総件数","example":100},"currentPage":{"type":"number","description":"現在のページ番号","example":1},"totalPages":{"type":"number","description":"総ページ数","example":5},"sortBy":{"description":"ソート条件","example":[["updatedAt","DESC"]],"type":"array","items":{"type":"string"}},"searchBy":{"description":"検索対象カラム","example":["title","content"],"type":"array","items":{"type":"string"}},"search":{"type":"string","description":"検索キーワード","example":""},"select":{"description":"取得カラム","example":[],"type":"array","items":{"type":"string"}},"filter":{"type":"object","description":"フィルター条件","example":{}}},"required":["itemsPerPage","sortBy","searchBy","search","select"]},"ResponsePaginatedLinksDto":{"type":"object","properties":{"first":{"type":"string","description":"最初のページURL","example":"/articles?page=1"},"previous":{"type":"string","description":"前のページURL","example":"/articles?page=1"},"current":{"type":"string","description":"現在のページURL","example":"/articles?page=2"},"next":{"type":"string","description":"次のページURL","example":"/articles?page=3"},"last":{"type":"string","description":"最後のページURL","example":"/articles?page=5"}},"required":["current"]},"ResponsePaginatedArticleAllDto":{"type":"object","properties":{"meta":{"description":"ページネーション情報","allOf":[{"$ref":"#/components/schemas/ResponsePaginatedMetaDto"}]},"links":{"description":"ページリンク","allOf":[{"$ref":"#/components/schemas/ResponsePaginatedLinksDto"}]},"data":{"description":"記事一覧","type":"array","items":{"$ref":"#/components/schemas/ResponseArticleAllDto"}}},"required":["meta","links","data"]},"ResponseArticleDraftDto":{"type":"object","properties":{"id":{"type":"number","description":"記事ID","example":1},"createdAt":{"format":"date-time","type":"string","description":"作成日時","example":"2025-01-01T00:00:00.000Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新日時","example":"2025-01-01T00:00:00.000Z"},"user":{"description":"投稿者","allOf":[{"$ref":"#/components/schemas/ResponseUserDto"}]},"contentDraft":{"description":"下書き","allOf":[{"$ref":"#/components/schemas/ResponseArticleContentDraftDto"}]}},"required":["id","createdAt","updatedAt","user","contentDraft"]},"ResponsePaginatedArticleDraftDto":{"type":"object","properties":{"meta":{"description":"ページネーション情報","allOf":[{"$ref":"#/components/schemas/ResponsePaginatedMetaDto"}]},"links":{"description":"ページリンク","allOf":[{"$ref":"#/components/schemas/ResponsePaginatedLinksDto"}]},"data":{"description":"記事一覧（下書き）","type":"array","items":{"$ref":"#/components/schemas/ResponseArticleDraftDto"}}},"required":["meta","links","data"]},"ResponseArticlePublishedDto":{"type":"object","properties":{"id":{"type":"number","description":"記事ID","example":1},"createdAt":{"format":"date-time","type":"string","description":"作成日時","example":"2025-01-01T00:00:00.000Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新日時","example":"2025-01-01T00:00:00.000Z"},"user":{"description":"投稿者","allOf":[{"$ref":"#/components/schemas/ResponseUserDto"}]},"contentPublishedVersions":{"description":"公開履歴","type":"array","items":{"$ref":"#/components/schemas/ResponseArticleContentPublishedDto"}}},"required":["id","createdAt","updatedAt","user","contentPublishedVersions"]},"ResponsePaginatedArticlePublishedDto":{"type":"object","properties":{"meta":{"description":"ページネーション情報","allOf":[{"$ref":"#/components/schemas/ResponsePaginatedMetaDto"}]},"links":{"description":"ページリンク","allOf":[{"$ref":"#/components/schemas/ResponsePaginatedLinksDto"}]},"data":{"description":"記事一覧（公開済み）","type":"array","items":{"$ref":"#/components/schemas/ResponseArticlePublishedDto"}}},"required":["meta","links","data"]},"ResponseDeleteResultDto":{"type":"object","properties":{"affected":{"type":"object","description":"削除された行数","example":1,"nullable":true}}},"RequestUpdateArticleDraftDto":{"type":"object","properties":{"title":{"type":"string","description":"タイトル","example":"はじめての投稿"},"content":{"type":"string","description":"本文","example":"これは記事の内容です。"}}},"RequestCreateUserDto":{"type":"object","properties":{"name":{"type":"string","description":"ユーザー名","example":"テストユーザー"},"thumbnailImage":{"type":"object","description":"サムネイル画像URL","example":"https://example.com/user.png","nullable":true}},"required":["name"]},"ResponsePaginatedUserDto":{"type":"object","properties":{"data":{"description":"ユーザー一覧","type":"array","items":{"$ref":"#/components/schemas/ResponseUserDto"}},"meta":{"description":"ページネーション情報","allOf":[{"$ref":"#/components/schemas/ResponsePaginatedMetaDto"}]},"links":{"description":"ページリンク","allOf":[{"$ref":"#/components/schemas/ResponsePaginatedLinksDto"}]}},"required":["data","meta","links"]},"RequestUpdateUserDto":{"type":"object","properties":{"name":{"type":"string","description":"ユーザー名","example":"テストユーザー"},"thumbnailImage":{"type":"object","description":"サムネイル画像URL","example":"https://example.com/user.png","nullable":true}}},"ResponseUpdateResultDto":{"type":"object","properties":{"affected":{"type":"number","description":"更新された行数","example":1}}}}}}